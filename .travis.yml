sudo: required
services:
  - docker
before_script:
  - docker pull orbsoft/cowsay || true
script:
  - docker build --pull --cache-from orbsoft/cowsay --tag orbsoft/cowsay .
  - docker run orbsoft/cowsay
after_script:
  - docker images
before_deploy:
  - echo $DOCKER_PASS | docker login --username "$DOCKER_USER" --password-stdin
deploy:
  provider: script
  script: docker push orbsoft/cowsay
  on:
    branch: master
